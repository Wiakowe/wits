{% extends '::base.html.twig' %}

{% block body %}

<h1 class="span11 offset1">
{{ project.name }}
</h1>

<div class="span11 offset1">
    <a class="btn" href="{{ path('wits_issue_new', {'project_id': project.id}) }}">{% trans %}Crear issue{% endtrans %}</a>
    {% if issues %}
    <ul id="issues" class="unstyled">
        {% for issue in issues %}
        <li><a href="{{ path('wits_issue_show', {'project_id': project.id, 'issue_id': issue.id}) }}">{{ issue.name}}</a></li>
        {% endfor %}
    </ul>
    {% endif %}

    <a class="btn" href="{{ path('wits_version_new', {'project_id': project.id}) }}">{% trans %}Crear version{% endtrans %}</a>
    {% if versions %}
    <ul id="versions" class="unstyled">
        {% for version in versions %}
        <li><a href="{{ path('wits_version_show', {'project_id': project.id, 'version_id': version.id}) }}">{{ version.name}}</a></li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% if is_granted('ROLE_ISSUE_CREATE') %}
<a href="{{ path('wits_issue_new', {'project_id': project.id}) }}">{% trans %}Crear issue{% endtrans %}</a>
{% endif %}
{% if issues %}
<ul id="issues">
    {% for issue in issues %}
    <li><a href="{{ path('wits_issue_show', {'project_id': project.id, 'issue_id': issue.id}) }}">{{ issue.name}}</a></li>
    {% endfor %}
</ul>
{% endif %}
<br />
{% if is_granted('ROLE_VERSION_CREATE') %}
<a href="{{ path('wits_version_new', {'project_id': project.id}) }}">{% trans %}Crear version{% endtrans %}</a>
{% endif %}
{% if is_granted('ROLE_VERSION_SHOW') %}
{% if versions %}
<ul id="versions">
    {% for version in versions %}
    {% if is_granted('ROLE_VERSION_EDIT') %}
    {% set version_path = 'wits_version_edit' %}
    {% else %}
    {% set version_path = 'wits_version_show' %}
    {% endif %}
    <li><a href="{{ path(version_path, {'project_id': project.id, 'version_id': version.id}) }}">{{ version.name}}</a></li>
    {% endfor %}
</ul>
{% endif %}
{% endif %}
{% endblock %}
