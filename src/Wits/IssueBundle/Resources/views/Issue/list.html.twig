{% extends '::base.html.twig' %}

{% set title = 'label_issues'|trans %}

{% if created is defined and created %}
    {% set title = title ~ ' - ' ~ 'created by %username%'|trans({'%username%': app.user.username}) %}
{% endif %}
{% if assigned is defined and assigned %}
    {% set title = title ~ ' - ' ~ 'assigned to %username%'|trans({'%username%': app.user.username}) %}
{% endif %}

{% block title %}{{ title }} - {{ project.name }}{% endblock %}

{% block body %}

<h1>{{ title }}</h1>

{% include 'WitsIssueBundle:Issue/Partial:issues_list.html.twig' %}

{% endblock %}

{% block aside %}
{% if is_granted('ROLE_ISSUE_CREATE') %}
    <a class="btn btn-success" href="{{ path('wits_issue_new', {'project_id': project.id}) }}">{% trans %}label_create_issue{% endtrans %}</a>
{% endif %}
{% if is_granted('ROLE_VERSION_LIST') %}
    {% if versions %}
        <h4>{{ 'label_versions'|trans }}</h4>
        <ul id="versions">
            {% for version in versions %}
                <li><a href="{{ path('wits_version_show', {'project_id': project.id, 'version_id': version.id}) }}">{{ version.name}}</a></li>
            {% endfor %}
        </ul>
    {% endif %}
{% endif %}

{% endblock %}
