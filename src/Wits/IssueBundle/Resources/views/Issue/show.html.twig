{% extends '::base.html.twig' %}

{% set title = issue.name %}

{% block title %}{{ title }} - {{ project.name }}{% endblock %}

{% block body %}

    <h1>{{ title }}</h1>

    <p>{{  issue.description }}</p>
    
    {% if is_granted('ROLE_ISSUE_COMMENT') %}
    <a class="btn btn-primary" href="{{ path('wits_comment_create', {'project_id': project.id, 'issue_id': issue.id }) }}">{% trans %}label_comment{% endtrans %}</a>
    {% endif %}

    {% if comments %}
    <ul id="comments">
        {% for comment in comments %}
            {% include 'WitsIssueBundle:Comment/Partial:comment.html.twig' %}
        {% endfor %}
    </ul>
    {% endif %}
{% endblock %}

{% block aside %}
    {% if is_granted('ROLE_ISSUE_EDIT') %}
        <a class="btn" href="{{ path('wits_issue_edit', {'project_id': project.id, 'issue_id': issue.id }) }}">{% trans %}label_edit{% endtrans %}</a>
    {% endif %}
    <br />
    {%  if issue.assignee %}
        <h3>{% trans %}label_issue_assignee{% endtrans %}</h3>
        <span>{{  issue.assignee }}</span>
    {%  endif  %}
    <h3>{%  trans %}label_issue_status{%  endtrans  %}</h3>
    <span>{{  issue.statusName|trans }}</span>
    <br />    
{% endblock %}
